(function(){"use strict";var e={9919:function(e,t,n){var i=n(6369),o=n(3822);i["default"].use(o.ZP);var r=new o.ZP.Store({modules:{}}),s=function(){var e=this,t=e._self._c;return t("PtdDesigner")},a=[],l={name:"App"},c=l,d=n(1001),u=(0,d.Z)(c,s,a,!1,null,null,null),h=u.exports,g=n(8499),f=n.n(g),p=n(2631);i["default"].use(p.ZP);const m=[],v=new p.ZP({mode:"history",base:"/",routes:m});var y=v,C=function(){var e=this,t=e._self._c;return t("el-container",{staticClass:"roy-designer-container",attrs:{id:"roy-print-template-designer",theme:"day"}},[t("el-header",{staticClass:"roy-designer-header",attrs:{height:"40px"}},[t("div",{staticClass:"roy-designer-header__text"},[t("i",{staticClass:"ri-pen-nib-line"}),t("span",[e._v("打印模板设计器")])]),t("div",{staticClass:"roy-night-mode"},[t("transition-group",{attrs:{name:"roy-fade",tag:"span"}},[e.isNightMode?t("i",{key:1,staticClass:"ri-haze-fill",on:{click:e.dayNightChange}}):t("i",{key:2,staticClass:"ri-moon-foggy-fill",on:{click:e.dayNightChange}})])],1)]),t("el-container",{staticStyle:{height:"calc(100% - 40px)"}},[t("el-aside",{staticClass:"roy-designer-aside",attrs:{width:"auto"}},[t("DesignerAside")],1),t("el-main",{staticClass:"roy-designer-main"},[t("DesignerMain")],1)],1)],1)},b=[],w={i8:"0.0.6"},_=function(){var e=this,t=e._self._c;return t("section",{staticClass:"roy-designer-aside__main",style:e.asideStyle},[t("el-menu",{staticClass:"roy-designer-aside__menu",attrs:{collapse:!0,"default-active":"0"},on:{select:e.onMenuSelect}},e._l(e.menuList,(function(n,i){return t("el-menu-item",{key:n.code,attrs:{index:`${i}`}},[t("div",{staticClass:"roy-designer-aside__menu__icon"},[t("i",{class:n.icon}),t("span",[e._v(e._s(n.name))])])])})),1),t("keep-alive",[t(e.curActiveComponent,{directives:[{name:"show",rawName:"v-show",value:e.showRight,expression:"showRight"}],key:e.curActiveComponentCode,tag:"component",staticClass:"roy-designer-aside__right_panel"})],1)],1)},M=[],k=n(1917),N={name:"DesignerAside",mixins:[k.Z],data(){return{showRight:!0,menuList:[{name:"组件",code:"component",icon:"ri-pencil-ruler-2-line",component:()=>n.e(945).then(n.bind(n,4945))},{name:"区块",code:"blocks",icon:"ri-layout-5-line",component:()=>n.e(565).then(n.bind(n,3565))},{name:"页面",code:"page",icon:"ri-stack-line",component:()=>n.e(377).then(n.bind(n,4377))},{name:"大纲",code:"toc",icon:"ri-pages-line",component:()=>n.e(502).then(n.bind(n,7502))},{name:"工具",code:"tools",icon:"ri-magic-line",component:()=>n.e(746).then(n.bind(n,2746))},{name:"全局",code:"setting",icon:"ri-sound-module-line",component:()=>n.e(205).then(n.bind(n,6205))}],curActiveComponent:null,curActiveComponentCode:""}},computed:{asideStyle(){return this.showRight?"width: 300px":"width: 65px"}},methods:{onMenuSelect(e){this.curActiveComponentCode===this.menuList[e].code?this.showRight=!this.showRight:this.showRight=!0,this.curActiveComponent=this.menuList[e].component,this.curActiveComponentCode=this.menuList[e].code}},mounted(){this.curActiveComponent=this.menuList[0].component,this.curActiveComponentCode=this.menuList[0].code}},A=N,E=(0,d.Z)(A,_,M,!1,null,"88bbf378",null),x=E.exports,S=function(){var e=this,t=e._self._c;return t("section",{staticClass:"height-all"},[t("ToolBar"),t("Editor")],1)},R=[],D=function(){var e=this,t=e._self._c;return t("el-header",{staticClass:"roy-designer-main__toolbar",attrs:{height:"45px"}},[t("section",{staticClass:"roy-designer-main__toolbar_left"},e._l(e.toolbarLeftConfig,(function(e,n){return t("el-tooltip",{key:n,attrs:{content:e.name,"open-delay":600,"visible-arrow":!1,effect:"dark",placement:"bottom"}},[t("div",{staticClass:"roy-designer-main__toolbar__item",on:{click:e.event}},[t("i",{class:e.icon})])])})),1),t("section",{staticClass:"roy-designer-main__toolbar_right"},e._l(e.toolbarRightConfig,(function(e,n){return t("el-tooltip",{key:n,attrs:{content:e.name,"open-delay":600,"visible-arrow":!1,effect:"dark",placement:"bottom"}},[t("div",{staticClass:"roy-designer-main__toolbar__item",on:{click:e.event}},[t("i",{class:e.icon})])])})),1)])},T=[],O={name:"ToolBar",mixins:[k.Z],components:{},props:{},data(){return{toolbarLeftConfig:[{name:"撤销",icon:"ri-arrow-go-back-fill",event:()=>{alert("撤销")}},{name:"恢复",icon:"ri-arrow-go-forward-fill",event:()=>{}}],toolbarRightConfig:[{name:"预览",icon:"ri-eye-2-fill",event:()=>{}},{name:"保存",icon:"ri-save-2-fill",event:()=>{}}]}},methods:{initMounted(){}},created(){},mounted(){this.initMounted()},watch:{}},L=O,B=(0,d.Z)(L,D,T,!1,null,"68c6a61e",null),$=B.exports,P=function(){var e=this,t=e._self._c;return t("div",{staticClass:"roy-designer-main__page"},[t("SketchRuler",{ref:"sketchRuler",attrs:{lang:e.lang,thick:e.thick,scale:e.scale,width:e.rulerWidth,height:e.rulerHeight,startX:e.startX,startY:e.startY,shadow:e.shadow,horLineArr:e.lines.h,verLineArr:e.lines.v,cornerActive:!1,palette:e.palette},on:{handleLine:e.handleLine,onCornerClick:e.handleCornerClick}}),t("div",{ref:"screensRef",attrs:{id:"screens"},on:{wheel:e.handleWheel,scroll:e.handleScroll}},[t("div",{ref:"containerRef",staticClass:"screen-container"},[t("div",{style:e.canvasStyle,attrs:{id:"designer-page"}},[t("div",[e._v("测试页面")])])])])],1)},j=[],Z=n(942),I={name:"RoyEditor",data(){return{rulerWidth:0,rulerHeight:0,scale:1.25,startX:-19,startY:-19,lines:{h:[],v:[]},thick:20,lang:"zh-CN",isShowRuler:!0,isShowReferLine:!0,rectWidth:1080,rectHeight:1504,palette:{bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:"#E8E8E8",lineColor:"#4579e1",borderColor:"#DADADC",cornerActiveColor:"#4579e1"}}},components:{SketchRuler:Z.Z},computed:{shadow(){return{x:0,y:0,width:this.rectWidth,height:this.rectHeight}},canvasStyle(){return{width:`${this.rectWidth}px`,height:`${this.rectHeight}px`,transform:`scale(${this.scale})`}},isNightMode(){return this.$store.state.printTemplateModule.nightMode.isNightMode}},methods:{handleLine(e){this.lines=e},handleCornerClick(){},handleScroll(){const e=document.querySelector("#screens").getBoundingClientRect(),t=document.querySelector("#designer-page").getBoundingClientRect(),n=(e.left+this.thick-t.left)/this.scale,i=(e.top+this.thick-t.top)/this.scale;this.startX=n,this.startY=i},handleWheel(e){(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.scale=parseFloat(Math.max(.2,this.scale-e.deltaY/500).toFixed(2))),this.$nextTick((()=>{this.handleScroll()}))}},mounted(){this.rulerWidth=this.$el.offsetWidth,this.rulerHeight=this.$el.offsetHeight,this.$refs.screensRef.scrollLeft=this.$refs.containerRef.getBoundingClientRect().width/2-300},watch:{isNightMode:{handler(e){this.palette={bgColor:"rgba(225,225,225, 0)",longfgColor:"#BABBBC",shortfgColor:"#C8CDD0",fontColor:"#7D8694",shadowColor:e?"#444444":"#E8E8E8",lineColor:"#EB5648",borderColor:e?"#636466":"#DADADC",cornerActiveColor:"rgb(235, 86, 72, 0.6)"},this.startX=this.startX+.01,this.startY=this.startY+.01,this.$nextTick((()=>{this.startX=this.startX-.01,this.startY=this.startY-.01}))}}}},Y=I,H=(0,d.Z)(Y,P,j,!1,null,null,null),X=H.exports,F={name:"DesignerMain",mixins:[k.Z],components:{ToolBar:$,Editor:X},props:{},data(){return{}},methods:{initMounted(){}},created(){},mounted(){this.initMounted()},watch:{}},W=F,G=(0,d.Z)(W,S,R,!1,null,null,null),q=G.exports;const z=w.i8;var K={name:"RoyPrintDesigner",components:{DesignerAside:x,DesignerMain:q},props:{},data(){return{}},computed:{isNightMode(){return this.$store.state.printTemplateModule.nightMode.isNightMode}},methods:{...(0,o.nv)({initNightMode:"printTemplateModule/nightMode/initNightMode",toggleNightMode:"printTemplateModule/nightMode/toggleNightMode"}),initMounted(){console.log(`\n %c PrintTemplateDesigner® v${z} %c ${new Date(window.versionTime||(new Date).getTime()).toLocaleString()}`,"color:#fff;background:linear-gradient(90deg,#4579e1,#009688);padding:5px 0;","color:#000;background:linear-gradient(90deg,#009688,#ffffff);padding:5px 10px 5px 0px;"),this.initConfig()},initConfig(){this.initNightMode()},dayNightChange(){console.log(!this.isNightMode),this.toggleNightMode(!this.isNightMode)},enterFullScreen(){}},created(){},mounted(){this.initMounted()},watch:{}},J=K,U=(0,d.Z)(J,C,b,!1,null,"7d013fe2",null),V=U.exports;const Q={},ee={},te={},ne={};var ie={STORAGE_PREFIX:"_ROY_DESIGNER_"};const{STORAGE_PREFIX:oe}=ie;var re={namespaced:!0,state:()=>({isNightMode:!1}),mutations:{setIsNightMode(e,t){e.isNightMode=t.isNightMode}},actions:{toggleNightMode({commit:e},t){window.localStorage.setItem(`${oe}NIGHT_MODE`,JSON.stringify(t)),document.getElementById("roy-print-template-designer").setAttribute("theme",t?"dark":"day"),e("setIsNightMode",{isNightMode:t})},async initNightMode({dispatch:e}){const t=window.localStorage.getItem(`${oe}NIGHT_MODE`);null!==t&&await e("toggleNightMode",JSON.parse(t))}}},se={namespaced:!0,state:Q,mutations:te,actions:ne,getters:ee,modules:{nightMode:re}};const ae={PtdDesigner:V},le=function(e,t={}){le.installed||(t.store?(t.store.registerModule(["printTemplateModule"],se),Object.keys(ae).forEach((t=>{e.component(t,ae[t])}))):console.warn("[print-template-designer] 请提供store！"))},ce={version:"ROY-PRINT-DESIGNER@0.0.6",install:le};"undefined"!==typeof window&&window.Vue&&le(window.Vue);var de=ce;i["default"].use(f(),{size:"small"}),i["default"].use(de,{store:r}),i["default"].config.productionTip=!1,new i["default"]({router:y,store:r,render:e=>e(h)}).$mount("#roy-app")},1917:function(e,t,n){n(7658);t["Z"]={methods:{deepCopy(e,t=[]){if(null===e||"object"!==typeof e)return e;const n=Object.prototype.toString.call(e).slice(8,-1);if("RegExp"===n)return new RegExp(e);if("Date"===n)return new Date(e);if("Error"===n)return new Error(e);const i=t.filter((t=>t.original===e))[0];if(i)return i.copy;const o=Array.isArray(e)?[]:{};return t.push({original:e,copy:o}),Object.keys(e).forEach((n=>{o[n]=this.deepCopy(e[n],t)})),o},getUuid(e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"){let t=[];for(let i=0;i<36;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="";let n=t.join("");return n},isBlank(e){return void 0===e||null===e||""===e},findParentComponent(e,t){let n=e.$parent;while(n){let e=n.$options.componentName||n.$options.name;if(e===t)return n;n=n.$parent}return!1}}}}},t={};function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,i,o,r){if(!i){var s=1/0;for(d=0;d<e.length;d++){i=e[d][0],o=e[d][1],r=e[d][2];for(var a=!0,l=0;l<i.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every((function(e){return n.O[e](i[l])}))?i.splice(l--,1):(a=!1,r<s&&(s=r));if(a){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[i,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,i){return n.f[i](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{205:"07c66e71",377:"83e43016",502:"549d4716",565:"d656503b",746:"543f3a2c",945:"12716093"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{205:"a078fa9c",377:"8a5be450",502:"c37e4a67",565:"d6635a5f",746:"581fe9f6",945:"3ad803b4"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="print-template-designer:";n.l=function(i,o,r,s){if(e[i])e[i].push(o);else{var a,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==i||u.getAttribute("data-webpack")==t+r){a=u;break}}a||(l=!0,a=document.createElement("script"),a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+r),a.src=i),e[i]=[o];var h=function(t,n){a.onerror=a.onload=null,clearTimeout(g);var o=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(e){return e(n)})),t)return t(n)},g=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/print-template-designer/"}(),function(){var e=function(e,t,n,i){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var r=function(r){if(o.onerror=o.onload=null,"load"===r.type)n();else{var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=s,l.request=a,o.parentNode.removeChild(o),i(l)}};return o.onerror=o.onload=r,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),i=0;i<n.length;i++){var o=n[i],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var s=document.getElementsByTagName("style");for(i=0;i<s.length;i++){o=s[i],r=o.getAttribute("data-href");if(r===e||r===t)return o}},i=function(i){return new Promise((function(o,r){var s=n.miniCssF(i),a=n.p+s;if(t(s,a))return o();e(i,a,o,r)}))},o={143:0};n.f.miniCss=function(e,t){var n={205:1,377:1,502:1,565:1,746:1,945:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=i(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,i){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var r=new Promise((function(n,i){o=e[t]=[n,i]}));i.push(o[2]=r);var s=n.p+n.u(t),a=new Error,l=function(i){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+s+")",a.name="ChunkLoadError",a.type=r,a.request=s,o[1](a)}};n.l(s,l,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,i){var o,r,s=i[0],a=i[1],l=i[2],c=0;if(s.some((function(t){return 0!==e[t]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(l)var d=l(n)}for(t&&t(i);c<s.length;c++)r=s[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},i=self["webpackChunkprint_template_designer"]=self["webpackChunkprint_template_designer"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(9919)}));i=n.O(i)})();
//# sourceMappingURL=app.2eb676f9.js.map